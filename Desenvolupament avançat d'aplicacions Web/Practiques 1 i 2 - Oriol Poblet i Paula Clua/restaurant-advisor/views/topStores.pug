extends layout

block content
  .container
    h2.text-center Top Stores

    // Botones para alternar entre Top Global y Top Personal
    .btn-group.mb-4(role="group" aria-label="Top Stores Toggle")
      button#globalTopBtn.btn.btn-primary(type="button") Global Top
      button#personalTopBtn.btn.btn-secondary(type="button") Personal Top

    // Tabla del Top Stores
    table#globalTopTable.table.table-striped(style="display: table;")
      thead
        tr
          th(scope="col") #
          th(scope="col") Photo
          th(scope="col") Name
          th(scope="col") Reviews
          th(scope="col") Average Rating
      tbody
        each store, i in stores
          tr
            th(scope="row") #{i + 1}
            td
              a(href=`/store/${store.slug}`)
                img(width=200 src=`/uploads/${store.photo || 'store.png'}` alt=store.name)
            td
              a(href=`/store/${store.slug}`)= store.name
            td #{store.reviews.length}
            td #{Math.round(store.averageRating * 10) / 10} / 5

    table#personalTopTable.table.table-striped(style="display: none;") 
      thead
        tr
          th(scope="col") #
          th(scope="col") Photo
          th(scope="col") Name
          th(scope="col") Your Average Rating
          th(scope="col") Reviews You Made
      tbody
        each store, i in personalStores
          tr
            th(scope="row") #{i + 1}
            td
              a(href=`/store/${store.slug}`)
                img(width=200 src=`/uploads/${store.photo || 'store.png'}` alt=store.name)
            td
              a(href=`/store/${store.slug}`)= store.name
            td #{store.userAverageRating} / 5
            td #{store.userReviewCount}

block scripts
  script.
    const globalTopBtn = document.getElementById('globalTopBtn');
    const personalTopBtn = document.getElementById('personalTopBtn');
    const globalTopTable = document.getElementById('globalTopTable');
    const personalTopTable = document.getElementById('personalTopTable');

    // Manejar la alternancia de tablas
    globalTopBtn.addEventListener('click', () => {
      globalTopTable.style.display = 'table';
      personalTopTable.style.display = 'none';
      globalTopBtn.classList.add('btn-primary');
      globalTopBtn.classList.remove('btn-secondary');
      personalTopBtn.classList.add('btn-secondary');
      personalTopBtn.classList.remove('btn-primary');
    });

    personalTopBtn.addEventListener('click', () => {
      globalTopTable.style.display = 'none';
      personalTopTable.style.display = 'table';
      personalTopBtn.classList.add('btn-primary');
      personalTopBtn.classList.remove('btn-secondary');
      globalTopBtn.classList.add('btn-secondary');
      globalTopBtn.classList.remove('btn-primary');
    });
